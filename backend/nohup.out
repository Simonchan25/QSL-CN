任务调度器已启动
INFO:     Started server process [88211]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     127.0.0.1:50803 - "GET /health HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:50818 - "GET /market HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:51024 - "GET /market HTTP/1.1" 200 OK
WARNING:  Invalid HTTP request received.
2025-09-10 18:00:00,010 - core.scheduler - ERROR - 晚报生成失败: 'ReportGenerator' object has no attribute 'generate_evening_report'
WARNING:  Invalid HTTP request received.
INFO:     127.0.0.1:52351 - "GET /resolve?name=%E8%8C%85%E5%8F%B0 HTTP/1.1" 200 OK
2025-09-10 18:15:27,133 [INFO] PROGRESS resolve:start {"input": "贵州茅台"}
2025-09-10 18:15:27,133 - qsl - INFO - PROGRESS resolve:start {"input": "贵州茅台"}
2025-09-10 18:15:27,135 [INFO] PROGRESS resolve:done {"base": {"ts_code": "600519.SH", "symbol": "600519", "name": "贵州茅台", "market": "SH", "list_status": "L"}}
2025-09-10 18:15:27,135 - qsl - INFO - PROGRESS resolve:done {"base": {"ts_code": "600519.SH", "symbol": "600519", "name": "贵州茅台", "market": "SH", "list_status": "L"}}
2025-09-10 18:15:27,135 [INFO] PROGRESS fetch:parallel:start {"ts_code": "600519.SH"}
2025-09-10 18:15:27,135 - qsl - INFO - PROGRESS fetch:parallel:start {"ts_code": "600519.SH"}
[提示] 外汇储备接口需要更高权限或不可用
2025-09-10 18:15:36,476 [INFO] PROGRESS fetch:parallel:done {"px_rows": 505, "fundamental_keys": ["valuation", "forecast", "express", "fina_indicator_latest", "income_recent", "balance_recent", "cashflow_recent"], "macro_keys": ["cpi_latest", "cpi_trend", "ppi_latest", "money_supply_latest", "m1_m2_gap", "shibor_latest", "gdp_latest", "pmi_latest", "pmi_signal", "m2_latest"]}
2025-09-10 18:15:36,476 - qsl - INFO - PROGRESS fetch:parallel:done {"px_rows": 505, "fundamental_keys": ["valuation", "forecast", "express", "fina_indicator_latest", "income_recent", "balance_recent", "cashflow_recent"], "macro_keys": ["cpi_latest", "cpi_trend", "ppi_latest", "money_supply_latest", "m1_m2_gap", "shibor_latest", "gdp_latest", "pmi_latest", "pmi_signal", "m2_latest"]}
2025-09-10 18:15:36,478 [INFO] PROGRESS compute:technical {"tech_last_close": 1522.01, "tech_last_rsi": 67.79, "tech_last_macd": 10.0171, "tech_last_dif": 17.0791, "tech_last_dea": 12.0705, "tech_signal": "DIF>DEA（偏多）"}
2025-09-10 18:15:36,478 - qsl - INFO - PROGRESS compute:technical {"tech_last_close": 1522.01, "tech_last_rsi": 67.79, "tech_last_macd": 10.0171, "tech_last_dif": 17.0791, "tech_last_dea": 12.0705, "tech_signal": "DIF>DEA（偏多）"}
2025-09-10 18:15:36,479 [INFO] PROGRESS fetch:announcements {"count": 15}
2025-09-10 18:15:36,479 - qsl - INFO - PROGRESS fetch:announcements {"count": 15}
2025-09-10 18:15:36,479 [INFO] PROGRESS compute:news_sentiment {"counts": {"positive": 0, "negative": 0, "neutral": 20}, "percentages": {"positive": 0.0, "negative": 0.0, "neutral": 100.0}, "overall": "neutral"}
2025-09-10 18:15:36,479 - qsl - INFO - PROGRESS compute:news_sentiment {"counts": {"positive": 0, "negative": 0, "neutral": 20}, "percentages": {"positive": 0.0, "negative": 0.0, "neutral": 100.0}, "overall": "neutral"}
2025-09-10 18:15:38,594 [INFO] PROGRESS compute:sentiment {"news_sentiment": {"counts": {"positive": 0, "negative": 0, "neutral": 20}, "percentages": {"positive": 0.0, "negative": 0.0, "neutral": 100.0}, "overall": "neutral"}, "moneyflow": {"has_data": false, "net_inflow_days": 0, "total_net_inflow": 0, "main_net_inflow": 0, "retail_net_inflow": 0, "flow_trend": "neutral", "flow_signals": []}, "margin_trading": {"has_data": true, "margin_balance": 164.98, "short_balance": 1.0017, "margin_ratio": 99.4, "margin_signal": []}, "northbound": {"has_data": false, "hgt_net": null, "sgt_net": null, "total_net": null, "north_signal": []}, "sentiment_score": 40, "sentiment_level": "中性偏空"}
2025-09-10 18:15:38,594 - qsl - INFO - PROGRESS compute:sentiment {"news_sentiment": {"counts": {"positive": 0, "negative": 0, "neutral": 20}, "percentages": {"positive": 0.0, "negative": 0.0, "neutral": 100.0}, "overall": "neutral"}, "moneyflow": {"has_data": false, "net_inflow_days": 0, "total_net_inflow": 0, "main_net_inflow": 0, "retail_net_inflow": 0, "flow_trend": "neutral", "flow_signals": []}, "margin_trading": {"has_data": true, "margin_balance": 164.98, "short_balance": 1.0017, "margin_ratio": 99.4, "margin_signal": []}, "northbound": {"has_data": false, "hgt_net": null, "sgt_net": null, "total_net": null, "north_signal": []}, "sentiment_score": 40, "sentiment_level": "中性偏空"}
2025-09-10 18:15:40,723 [INFO] PROGRESS compute:chip_analysis {"chip_distribution": {"has_data": true, "cost_analysis": {"avg_cost": 1539.05, "median_cost": 1486.1, "cost_5pct": 1331.7, "cost_95pct": 2084.4}, "winner_rate": 57.66, "chip_concentration": 50.65, "support_resistance": {"strong_support": 1331.7, "support": 1486.1, "resistance": 2084.4}, "signals": ["筹码分布均衡"]}, "institution_survey": {"has_data": false, "survey_count": 0, "recent_surveys": [], "institution_interest": "低", "signals": []}, "ccass_holding": {"has_data": false, "latest_ratio": null, "ratio_change": null, "holder_change": null, "trend": "stable", "signals": []}, "comprehensive_score": 60, "investment_suggestion": "中性"}
2025-09-10 18:15:40,723 - qsl - INFO - PROGRESS compute:chip_analysis {"chip_distribution": {"has_data": true, "cost_analysis": {"avg_cost": 1539.05, "median_cost": 1486.1, "cost_5pct": 1331.7, "cost_95pct": 2084.4}, "winner_rate": 57.66, "chip_concentration": 50.65, "support_resistance": {"strong_support": 1331.7, "support": 1486.1, "resistance": 2084.4}, "signals": ["筹码分布均衡"]}, "institution_survey": {"has_data": false, "survey_count": 0, "recent_surveys": [], "institution_interest": "低", "signals": []}, "ccass_holding": {"has_data": false, "latest_ratio": null, "ratio_change": null, "holder_change": null, "trend": "stable", "signals": []}, "comprehensive_score": 60, "investment_suggestion": "中性"}
[高级数据] 开始获取 600519.SH 的全方位专业数据...
[高级数据] ✓ chip_analysis 数据获取完成
[高级数据] ✓ institution_data 数据获取完成
[高级数据] ✓ holders_analysis 数据获取完成
[高级数据] ✓ technical_factors 数据获取完成
[高级数据] ✓ fund_holdings 数据获取完成
[高级数据] ✓ options_data 数据获取完成
[高级数据] 600519.SH 全方位数据获取完成
2025-09-10 18:15:46,231 [INFO] PROGRESS compute:advanced_analysis {"data_sources": 4, "total_modules": 6}
2025-09-10 18:15:46,231 - qsl - INFO - PROGRESS compute:advanced_analysis {"data_sources": 4, "total_modules": 6}
[提示] 外汇储备接口需要更高权限或不可用
2025-09-10 18:15:46,236 [INFO] PROGRESS compute:scorecard {"score_total": 60.7, "score_fundamental": 14.7, "score_technical": 28.0, "score_sentiment": 14.0, "score_macro": 4.0}
2025-09-10 18:15:46,236 - qsl - INFO - PROGRESS compute:scorecard {"score_total": 60.7, "score_fundamental": 14.7, "score_technical": 28.0, "score_sentiment": 14.0, "score_macro": 4.0}
2025-09-10 18:15:46,237 [INFO] PROGRESS llm:summary:start {}
2025-09-10 18:15:46,237 - qsl - INFO - PROGRESS llm:summary:start {}
[LLM] 开始调用Ollama: model=deepseek-r1:32b, url=http://localhost:11434, streaming=False
[LLM] 响应长度: 2251
2025-09-10 18:21:04,317 [INFO] PROGRESS llm:summary:done {"length": 1541}
2025-09-10 18:21:04,317 - qsl - INFO - PROGRESS llm:summary:done {"length": 1541}
INFO:     127.0.0.1:52360 - "POST /analyze HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:53380 - "GET /market/ai-analysis HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:53490 - "GET /market/ai-analysis HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:54048 - "GET /market/ai-analysis HTTP/1.1" 200 OK
INFO:     127.0.0.1:54203 - "POST /reports/morning/generate HTTP/1.1" 200 OK
[早报] 开始生成专业早报模版格式 2025-09-10
INFO:     127.0.0.1:54211 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
[LLM] 生成晨报专业综述: model=deepseek-r1:32b
[报告] 专业早报模版已保存到 /Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/core/../.cache/reports/2025-09-10_morning_professional_v2.json
[早报] 专业早报模版生成完成
INFO:     127.0.0.1:57488 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:57611 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:57636 - "GET /logs/stream HTTP/1.1" 200 OK
INFO:     127.0.0.1:57732 - "GET /screening/top-picks?limit=5 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:57767 - "GET /screening/top-picks?limit=5 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:65325 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:65395 - "GET /reports/history HTTP/1.1" 200 OK
INFO:     127.0.0.1:49160 - "GET /reports/morning?date=2025-09-10 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:49341 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
INFO:     127.0.0.1:49892 - "GET /reports/history HTTP/1.1" 200 OK
INFO:     127.0.0.1:49893 - "GET /reports/noon HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:50178 - "GET /reports/noon HTTP/1.1" 500 Internal Server Error
INFO:     127.0.0.1:50179 - "GET /reports/morning HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 399, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 70, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/applications.py", line 123, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/fastapi/routing.py", line 307, in app
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 184, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 41, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/chenfei/Library/Mobile Documents/com~apple~CloudDocs/AI/QSL-CN/backend/.venvrun/lib/python3.11/site-packages/starlette/responses.py", line 187, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.11/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:50798 - "GET /market/fear-greed-index HTTP/1.1" 200 OK
[信息] 北向资金数据暂不可用
[信息] 大宗交易数据API暂不可用
INFO:     127.0.0.1:51249 - "GET /market/alerts HTTP/1.1" 200 OK
INFO:     127.0.0.1:51282 - "GET /resolve?name=%E5%AE%9D HTTP/1.1" 404 Not Found
